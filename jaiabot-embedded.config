#!/bin/sh -e

# Source debconf library.
. /usr/share/debconf/confmodule

db_input high jaiabot-embedded/type || true
db_go

db_input medium jaiabot-embedded/mode || true
db_go

db_get jaiabot-embedded/mode
JAIA_MODE=$RET

if [ "$JAIA_MODE" = "simulation" ]; then
    db_input medium jaiabot-embedded/warp || true
    db_go
fi

db_get jaiabot-embedded/type
JAIA_TYPE=$RET
if [ "$JAIA_TYPE" = "bot" ]; then
    db_input high jaiabot-embedded/bot_id || true
    db_go

    db_input high jaiabot-embedded/arduino_type || true
    db_go

    db_get jaiabot-embedded/arduino_type
    ARDUINO_TYPE=$RET  
    if [ "$ARDUINO_TYPE" = "usb_old" ] || [ "$ARDUINO_TYPE" = "usb_new" ]; then
        db_set jaiabot-embedded/arduino_type usb
    fi
    
    db_input high jaiabot-embedded/imu_type || true
    db_go
elif [ "$JAIA_TYPE" = "hub" ]; then
    db_input high jaiabot-embedded/hub_id || true
    db_go
fi

db_input high jaiabot-embedded/fleet_id || true
db_go

db_input high jaiabot-embedded/led_type || true
db_go

db_input high jaiabot-embedded/electronics_stack || true
db_go

db_input medium jaiabot-embedded/user_role || true
db_go
